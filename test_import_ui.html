<!DOCTYPE html>
<html>
<head>
    <title>Import UI Test</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .test-section { margin: 20px 0; padding: 15px; border: 1px solid #ccc; }
        .file-input { margin: 10px 0; }
        .preview-section { background: #f5f5f5; padding: 15px; margin: 10px 0; }
        .mapping-row { margin: 10px 0; }
        .form-select { padding: 5px; margin: 5px; }
        .import-button { background: #007AFF; color: white; padding: 10px 20px; border: none; border-radius: 5px; }
        .import-button:disabled { background: #ccc; }
    </style>
</head>
<body>
    <h1>SpendWise Import UI Test</h1>
    
    <div class="test-section">
        <h3>1. File Upload Section</h3>
        <input type="file" accept=".csv,.xlsx,.xls" class="file-input" id="fileInput">
        <p>Supported formats: CSV, Excel (.xlsx, .xls)</p>
        <div id="fileSelected" style="display:none;">
            <p>Selected: <span id="fileName"></span></p>
        </div>
    </div>
    
    <div class="test-section preview-section" id="previewSection" style="display:none;">
        <h3>2. Preview & Column Mapping</h3>
        <div class="import-stats">
            <p><strong>Total Rows:</strong> <span id="totalRows">5</span></p>
            <p><strong>Auto-detected columns:</strong> <span id="detectedCols">4</span></p>
        </div>
        
        <div class="column-mapping">
            <h4>Column Mapping</h4>
            <div class="mapping-grid">
                <div class="mapping-row">
                    <label>Amount Column *</label>
                    <select class="form-select" id="amountMapping">
                        <option value="">Select column</option>
                        <option value="Amount" selected>Amount</option>
                        <option value="Cost">Cost</option>
                        <option value="Price">Price</option>
                    </select>
                </div>
                
                <div class="mapping-row">
                    <label>Description Column *</label>
                    <select class="form-select" id="descMapping">
                        <option value="">Select column</option>
                        <option value="Description" selected>Description</option>
                        <option value="Detail">Detail</option>
                        <option value="Note">Note</option>
                    </select>
                </div>
                
                <div class="mapping-row">
                    <label>Category Column</label>
                    <select class="form-select" id="categoryMapping">
                        <option value="">Select column (optional)</option>
                        <option value="Category" selected>Category</option>
                        <option value="Type">Type</option>
                    </select>
                </div>
                
                <div class="mapping-row">
                    <label>Date Column</label>
                    <select class="form-select" id="dateMapping">
                        <option value="">Select column (optional)</option>
                        <option value="Date" selected>Date</option>
                        <option value="Timestamp">Timestamp</option>
                    </select>
                </div>
            </div>
        </div>
        
        <div class="preview-table">
            <h4>Data Preview</h4>
            <table border="1" style="width:100%; border-collapse: collapse;">
                <thead>
                    <tr>
                        <th>Amount</th>
                        <th>Description</th>
                        <th>Category</th>
                        <th>Date</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>150.50</td>
                        <td>Grocery shopping at SM</td>
                        <td>Grocery</td>
                        <td>2024-01-15</td>
                    </tr>
                    <tr>
                        <td>75.25</td>
                        <td>Gas station fill up</td>
                        <td>Fuel</td>
                        <td>2024-01-16</td>
                    </tr>
                    <tr>
                        <td>200.00</td>
                        <td>Dinner at restaurant</td>
                        <td>Dining Out</td>
                        <td>2024-01-17</td>
                    </tr>
                </tbody>
            </table>
        </div>
        
        <div class="import-actions">
            <button class="import-button" id="importButton">Import 5 Expenses</button>
        </div>
    </div>
    
    <div class="test-section" id="resultSection" style="display:none;">
        <h3>3. Import Results</h3>
        <div class="result-stats">
            <div style="display:inline-block; margin:10px; padding:10px; background:#d4edda; border:1px solid #c3e6cb;">
                <h4>‚úÖ Successful</h4>
                <p id="successCount">5 expenses</p>
            </div>
            <div style="display:inline-block; margin:10px; padding:10px; background:#f8d7da; border:1px solid #f5c6cb;">
                <h4>‚ùå Failed</h4>
                <p id="failedCount">0 expenses</p>
            </div>
        </div>
    </div>
    
    <script>
        // Simulate file upload behavior
        document.getElementById('fileInput').addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (file) {
                document.getElementById('fileName').textContent = file.name;
                document.getElementById('fileSelected').style.display = 'block';
                
                // Simulate preview loading
                setTimeout(() => {
                    document.getElementById('previewSection').style.display = 'block';
                    console.log('‚úÖ Preview section displayed');
                }, 1000);
            }
        });
        
        // Simulate import button behavior
        document.getElementById('importButton').addEventListener('click', function() {
            const amountMapping = document.getElementById('amountMapping').value;
            const descMapping = document.getElementById('descMapping').value;
            
            if (!amountMapping || !descMapping) {
                alert('Please map the required columns (Amount and Description) before importing');
                return;
            }
            
            this.textContent = 'Importing...';
            this.disabled = true;
            
            // Simulate import process
            setTimeout(() => {
                document.getElementById('resultSection').style.display = 'block';
                this.textContent = 'Import 5 Expenses';
                this.disabled = false;
                console.log('‚úÖ Import completed successfully');
                alert('Import completed!\n‚úÖ Successfully imported: 5 expenses');
            }, 2000);
        });
        
        // Test column mapping validation
        function validateMappings() {
            const amountMapping = document.getElementById('amountMapping').value;
            const descMapping = document.getElementById('descMapping').value;
            const importButton = document.getElementById('importButton');
            
            if (amountMapping && descMapping) {
                importButton.disabled = false;
                importButton.style.background = '#007AFF';
                console.log('‚úÖ Required mappings are valid');
            } else {
                importButton.disabled = true;
                importButton.style.background = '#ccc';
                console.log('‚ö†Ô∏è Required mappings missing');
            }
        }
        
        // Add event listeners for mapping validation
        document.getElementById('amountMapping').addEventListener('change', validateMappings);
        document.getElementById('descMapping').addEventListener('change', validateMappings);
        
        // Initial validation
        validateMappings();
        
        console.log('üß™ Import UI Test initialized');
    </script>
</body>
</html>